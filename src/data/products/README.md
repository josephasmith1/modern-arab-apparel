# Products Data Migration Guide

This directory contains the new JSON-based product data system for gradual migration from the monolithic `data.ts` file.

## Structure

- `index.ts` - Main entry point that provides the same interface as the old `data.ts`
- `*.json` - Individual product JSON files exported from Shopify
- `usage-example.tsx` - Examples of how to use the new system

## Usage

### Basic Import (Server Components)

```typescript
// OLD WAY
import { products } from '@/app/products/data';

// NEW WAY - Same interface, loads from JSON
import { products } from '@/data/products';
```

### Available Exports

```typescript
import { 
  products,              // Array of all products
  Product,               // TypeScript interface
  findProductBySlug,     // Helper to find product by slug
  getProductsByCollection, // Filter by collection
  getProductsByTag,      // Filter by tag
  getCollections,        // Get unique collections
  getTags,               // Get unique tags
  refreshProducts        // Reload products (dev only)
} from '@/data/products';
```

## Benefits

1. **Backward Compatible** - Same interface as `data.ts`
2. **Modular** - Each product in its own JSON file
3. **Maintainable** - Easy to update individual products
4. **Type Safe** - Full TypeScript support
5. **Error Handling** - Graceful fallbacks if files can't be loaded

## Migration Steps

1. Update imports from `@/app/products/data` to `@/data/products`
2. Test that products load correctly
3. No other code changes needed!

## How It Works

1. The `product-loader.ts` reads JSON files from this directory
2. Converts Shopify JSON format to our Product interface
3. Generates image paths automatically based on product handle and color slugs
4. Caches products in memory for performance

## Adding New Products

1. Export product from Shopify as JSON
2. Place in `src/data/products/[product-handle].json`
3. Images should be in `public/images/[product-handle]/` with naming pattern: `[color-slug]-[type].jpg`
   - Main image: `[color-slug]-main.jpg`
   - Back image: `[color-slug]-back.jpg` 
   - Lifestyle: `[color-slug]-lifestyle-1.jpg`
4. Run `refreshProducts()` in development to reload

## Troubleshooting

- If products don't load, check console for error messages
- Verify JSON files exist in `src/data/products/`
- Check that images follow the naming convention in `public/images/[product-handle]/`
- Color slugs are generated by converting color names to lowercase and replacing spaces with hyphens
- For client components, additional setup may be needed (coming soon)